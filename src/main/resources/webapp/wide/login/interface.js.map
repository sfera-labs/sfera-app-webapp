{"version":3,"sources":["skins/default/default.js","components/button/button.js","components/input/input.js","components/image/image.js","components/page/page.js","components/label/label.js","components/interface/interface.js","custom.js"],"names":["Sfera","Skins","Default","this","VERSION","styles","Input","Button","Checkbox","Radio","colors","Components","create","presets","attributes","label","update","co","component","subComponents","setAttribute","value","elements","style","display","icon","type","default","fontSize","onClick","onDown","onMove","init","Utils","getComponentElements","element","button","UI","container","ondown","bind","onup","onUp","onmove","updateClass","col","getAttribute","sty","d","setClassName","enable","f","Custom","exec","id","extends","values","redraw","height","field","focus","eraseButton","erase","error","restoreTimeout","changeDelay","keyRegex","valueRegex","compile","Compiler","compileAttributeValue","source","fontColor","color","maxLength","onChange","onKeyDown","onKeyUp","onEnterKey","onFocus","onBlur","self","changeTimeout","onclick","onErase","blur","onfocus","onblur","onselectstart","phText","fieldC","innerHTML","childNodes","Device","android","oninput","onUserChange","onSelectStart","controller","cl","focused","e","className","onChangedTimeout","onChanged","v","clearChangeTimeout","setTimeout","clearTimeout","event","code","keyCode","c","getKeyFromCode","client","focusNext","shiftKey","onKeyPress","fieldE","getSelectedText","text","selectionStart","selectionEnd","substr","window","getSelection","toString","document","selection","createRange","length","ctrlKey","metaKey","test","String","fromCharCode","setFocused","clearFocused","onShow","onHide","indexOf","req","Net","Request","onLoaded","xml","getResponseXML","svg","getElementsByTagName","appendChild","width","open","title","visible","skin","capitalize","zoom","bodyE","browser","msTransform","msTransformOrigin","OTransform","MozTransform","WebkitTransformOrigin","transformOrigin","autoReload","root","onReady","onEvent","onPage","name","page","showPage","callback","sendEvent","command","sendCommand","logout","Login","login","username","password","result","eval","SyntaxError","alert","message"],"mappings":"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","sourcesContent":["/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2015 SferaLabs\n * @license      {@link https://github.com/sfera-labs/sfera-webapp/license.txt|MIT License}\n * Default.js\n */\n\n/**\n * Sfera.Skins.Default contains and handles skins\n *\n * @class Sfera.Skins.Default\n * @constructor\n */\nSfera.Skins.Default = function() {\n\n    this.VERSION = \"1.0\";\n\n    this.styles = {\n        Input: [\"default\", \"clear\"],\n        Button: [\"default\", \"clear\", \"icon\"],\n        Checkbox: [\"default\", \"radio\", \"switch\", \"clear\"],\n        Radio: [\"default\"],\n    };\n\n    this.colors = {\n        Button: [\n            \"default\",\n            \"light\",\n            \"stable\",\n            \"positive\",\n            \"calm\",\n            \"balanced\",\n            \"energized\",\n            \"assertive\",\n            \"royal\",\n            \"dark\"\n        ]\n    }\n\n};\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\n/**\n * Button component.\n *\n * @class Sfera.Components.Button\n * @constructor\n */\nSfera.Components.create(\"Button\", {\n    presets: [\"Visibility\", \"Position\", \"Size\", \"Style\", \"Color\", \"Enable\"],\n\n    attributes: {\n        label: {\n            update: function() {\n                var co = this.component;\n                var label = co.subComponents.label;\n                label.setAttribute(\"label\", this.value);\n                if (this.value) {\n                    co.elements.label.style.display = \"\";\n                    //label.setAttribute(\"visible\",true);\n                } else {\n                    co.elements.label.style.display = \"none\";\n                    //label.setAttribute(\"visible\",false);\n                }\n                //this.component.element.innerHTML = \"<div class='inner'>\" + this.value + \"</div>\";\n            },\n        },\n\n        icon: {\n            type: \"string\",\n            default: \"\",\n            update: function() {\n                var co = this.component;\n                var icon = co.subComponents.icon;\n                icon.setAttribute(\"source\", this.value);\n                if (this.value) {\n                    co.elements.icon.style.display = \"\";\n                    //icon.setAttribute(\"visible\",true);\n                } else {\n                    co.elements.icon.style.display = \"none\";\n                    //icon.setAttribute(\"visible\",false);\n                }\n            },\n        },\n\n        fontSize: {\n            update: function() {\n                var co = this.component;\n                var label = co.subComponents.label;\n                label.setAttribute(\"fontSize\", this.value);\n            },\n        },\n\n        onClick: {\n            type: \"js\",\n            default: \"event(id,true)\"\n        },\n\n        onDown: {\n            type: \"js\",\n        },\n\n        onMove: {\n            type:\"js\",\n        }\n\n    },\n\n    init: function() {\n\n        // fill elements with all nodes that have a name\n        this.elements = Sfera.Utils.getComponentElements(this.element, true, this.elements);\n\n        this.button = new Sfera.UI.Button(this.elements.container, {\n            ondown: this.onDown.bind(this),\n            onup: this.onUp.bind(this),\n            onmove: this.onMove.bind(this)\n        });\n\n        this.updateClass();\n\n        //this.element.onclick = this.onClick.bind(this);\n    },\n\n    updateClass: function() {\n        var col = this.getAttribute(\"color\") || \"default\";\n        var sty = this.getAttribute(\"style\") || \"default\";\n        var d = (this.getAttribute(\"enabled\") ? \"\" : \" disabled\")\n        this.button.setClassName(\"container\" + (sty?\" style_\"+sty:\"\") + (col?\" color_\"+col:\"\")) + d;\n        this.button.enable(d?false:true);\n    },\n\n    onDown: function() {\n        var f = this.getAttribute(\"onDown\");\n        Sfera.Custom.exec(f, this.id);\n    },\n\n    onMove: function() {\n        var f = this.getAttribute(\"onMove\");\n        Sfera.Custom.exec(f, this.id);\n    },\n\n    onUp: function() {\n        var f = this.getAttribute(\"onClick\");\n        Sfera.Custom.exec(f, this.id);\n    }\n\n\n});\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\n/**\n * Input component.\n *\n * @class Sfera.Components.Input\n * @extends Sfera.Components._Field\n * @property {string} type - type of the field\n * @property {string} icon - url of an icon\n */\nSfera.Components.create(\"Input\", {\n    extends: \"_Field\",\n\n    attributes: {\n        type: {\n            type: \"string\",\n            default: \"input\",\n            values: [\"input\",\"textarea\",\"color\",\"date\",\"datetime\",\"email\",\"number\",\"password\",\"tel\",\"time\",\"url\"],\n            update: function() {\n                this.component.redraw();\n            }\n        },\n\n        height: {\n            update: function() {\n                if (this.component.elements.field)\n                    this.component.elements.field.style.height = this.value + \"px\";\n            }\n        },\n\n        focus: {\n            type: \"boolean\",\n            update: function() {\n                if (this.value)\n                    this.component.focus();\n            }\n        },\n\n        icon: {\n            type: \"string\",\n            default: \"\",\n            update: function() {\n                var co = this.component;\n                var icon = co.subComponents.icon;\n                icon.setAttribute(\"source\", this.value);\n                if (this.value) {\n                    co.elements.icon.style.display = \"\";\n                    //icon.setAttribute(\"visible\",true);\n                } else {\n                    co.elements.icon.style.display = \"none\";\n                    //icon.setAttribute(\"visible\",false);\n                }\n            }\n        },\n\n        eraseButton: {\n            type: \"boolean\",\n            default: \"false\",\n            update: function() {\n                var co = this.component;\n                co.elements.erase.style.display = this.value ? \"\" : \"none\";\n            }\n        },\n\n        value: {\n            update: function() {\n                if (this.component.elements.field)\n                    this.component.elements.field.value = this.value;\n            }\n        },\n\n        error: {\n            type:\"boolean\",\n            default:\"false\",\n            restoreTimeout:3000,\n            update: function() {\n                var co = this.component;\n                co.updateClass();\n            }\n        },\n\n        changeDelay: {\n            type: \"integer\",\n            default: \"1000\" // msec to wait before noticing a change\n        },\n\n        // regular expression used to validate keydown\n        keyRegex: {\n            type: \"regexp\"\n        },\n\n        // regular expression used to validate value before submitting\n        valueRegex: {\n            type: \"regexp\",\n\n            compile: function() {\n                this.value = Sfera.Compiler.compileAttributeValue(this, \"^(\" + this.source + \")$\"); // add begin and end, it has to match the whole string\n                // do nothing else, since there's no update needed\n            }\n        },\n\n        fontSize: {\n            type: \"integer\",\n\n            update: function() {\n                if (this.component.elements.field)\n                    this.component.elements.field.style.fontSize = this.value + \"px\";\n                //this.component.subComponents.erase.setAttribute(\"width\")\n            }\n        },\n\n        fontColor: {\n            update: function() {\n                if (this.component.elements.field)\n                    this.component.elements.field.style.color = this.value;\n            }\n        },\n\n        maxLength: {\n            type: \"integer\"\n        },\n\n        onChange: {\n            type: \"js\",\n            default: \"event(id,value)\"\n        },\n        onKeyDown: {\n            type: \"js\"\n        },\n        onKeyUp: {\n            type: \"js\"\n        },\n        onEnterKey: {\n            type: \"js\"\n        },\n        onFocus: {\n            type: \"js\"\n        },\n        onBlur: {\n            type: \"js\"\n        }\n    },\n\n    init: function() {\n        var self = this;\n\n        this.value = \"\"; // TODO: used?\n        this.changeTimeout = null;\n\n        // fill elements with all nodes that have a name\n        this.elements = Sfera.Utils.getComponentElements(this.element, true, this.elements);\n\n        this.eraseButton = new Sfera.UI.Button(this.elements.erase, {\n            onclick: this.onErase.bind(this)\n        });\n\n        /*\n        switch (this.getAttribute(\"type\")) {\n            case \"date\":\n                this.btObj = new Sfera.UI.Button(this.element, {\n                    onclick: this.onClick.bind(this)\n                });\n        }\n        */\n    },\n\n    focus: function() {\n        this.elements.field.focus(); // will fire onFocus\n    },\n\n    blur: function() {\n        this.elements.field.blur(); // will fire onBlur\n    },\n\n    // redraw\n    redraw: function() {\n        var value = \"\";\n\n        if (this.elements.field) {\n            this.elements.field.onfocus = null;\n            this.elements.field.onblur = null;\n            this.elements.field.onselectstart = null;\n            value = this.elements.field.value;\n            this.elements.field = null;\n        }\n        var type = this.getAttribute(\"type\");\n        var phText = this.getAttribute(\"placeHolder\");\n        phText = phText ? ' placeholder=\"' + phText + '\"' : '';\n        var style = \"\"; // TODO: styling the field\n        style = style ? ' style=\"' + style + '\"' : '';\n\n        var d = this.getAttribute(\"enabled\")?\"\":\" disabled\";\n        if (type == \"textarea\")\n            this.elements.fieldC.innerHTML = '<textarea class=\"field\" ' + style + phText + d + ' /></textarea>';\n        else\n            this.elements.fieldC.innerHTML = '<input class=\"field\" type=\"' + type + '\"' + style + phText + d + ' autocorrect=\"off\" autocapitalize=\"off\" />';\n\n        this.elements.field = this.elements.fieldC.childNodes[0];\n        this.elements.field.value = value;\n        this.attributes.height.update();\n\n        if (Sfera.Device.android == \"Android\") { // android: gets last click on a different page if in same position\n            this.elements.field.onfocus = function() {\n                return false;\n            };\n            this.elements.field.oninput = this.onUserChange;\n        } else {\n            this.elements.field.onfocus = this.onFocus; // skip this.elements.field.focus to avoid loop\n        }\n        this.elements.field.onblur = this.onBlur;\n        this.elements.field.onselectstart = this.onSelectStart;\n\n        this.elements.field.controller = this;\n    },\n\n    updateClass: function () {\n        var cl = this.getAttribute(\"cssClass\");\n        var f = (this.focused?\" focused\":\"\");\n        var d = this.getAttribute(\"enabled\") ? \"\" : \" disabled\";\n        var e = this.getAttribute(\"error\") ? \" error\" : \"\";\n        this.element.className = \"component comp_input\" + (cl?\" \"+cl:\"\") + f + d;\n        var sty = this.getAttribute(\"style\");\n        this.elements.container.className = \"container\" + (sty?\" style_\"+sty:\"\") + e;\n\n        if (this.elements.field) {\n            this.elements.field[(d?\"set\":\"remove\") + \"Attribute\"](\"disabled\", true);\n        }\n    },\n\n    //\n    // events\n    //\n\n    // on erase button\n    onErase: function() {\n        if (!this.getAttribute(\"enabled\"))\n            return;\n\n        this.setAttribute(\"value\", \"\");\n        this.onChangedTimeout();\n    },\n\n    onChanged: function() {\n        var v = this.elements.field.value;\n\n        if (v != this.attributes.value.source) {\n            this.attributes.value.source =\n                this.attributes.value.value = v;\n\n            this.clearChangeTimeout();\n            //if (foo.autoSend || foo.onUserChange) { // otherwise there's nothing to do\n\n            var changeDelay = this.getAttribute(\"changeDelay\");\n            var self = this;\n            if (changeDelay) // if 0, disabled\n                this.changeTimeout = setTimeout(function() {\n                self.onChangedTimeout()\n            }, changeDelay);\n        }\n    },\n\n    clearChangeTimeout: function() {\n        if (this.changeTimeout) {\n            clearTimeout(this.changeTimeout);\n            this.changeTimeout = null; // make sure?\n        }\n    },\n\n    // on changed after timeout\n    onChangedTimeout: function() {\n        this.clearChangeTimeout();\n\n        // custom change event\n        var f = this.getAttribute(\"onChange\");\n        if (f) {\n            var value = this.getAttribute(\"value\");\n            Sfera.Custom.exec(f, this.id, value);\n        }\n    },\n\n    onSelectStart: function(event) {\n\n    },\n\n    onKeyDown: function(event) {\n        if (!this.getAttribute(\"enabled\"))\n            return;\n\n        this.setAttribute(\"error\", \"false\"); // make sure we're not showing an error\n        var code = event.keyCode;\n        var c = Sfera.Utils.getKeyFromCode(code);\n        var type = this.getAttribute(\"type\");\n\n        // trigger on enter event\n        if (c == \"enter\" && !this.onEnterKey()) {\n            c = \"\"; // onEnterKey prevented, don't focus next\n        }\n\n        if ((c == \"enter\" && type != \"textarea\") || c == \"tab\") {\n            this.onChangedTimeout(); // send now\n\n            Sfera.client.focusNext(event.shiftKey);\n            if (c == \"enter\" && type != \"textarea\")\n                this.blur(); // still focused? (no next object)\n\n            return false; // done, prevent\n        } else {\n            this.onChanged();\n\n            return true; // allow\n        }\n    },\n\n    onKeyPress: function(event) {\n        if (!this.getAttribute(\"enabled\"))\n            return;\n\n        var code = event.keyCode;\n        var c = Sfera.Utils.getKeyFromCode(code);\n        var fieldE = this.elements.field;\n        var value = this.getAttribute(\"value\");\n        var keyRegex = this.getAttribute(\"keyRegex\");\n        var maxLength = this.getAttribute(\"maxLength\");\n\n        function getSelectedText() {\n            var text = \"\";\n            if (fieldE.selectionStart != fieldE.selectionEnd) {\n                text = value.substr(fieldE.selectionStart, fieldE.selectionEnd);\n            } else if (typeof window.getSelection != \"undefined\") {\n                text = window.getSelection().toString();\n            } else if (typeof document.selection != \"undefined\" && document.selection.type == \"Text\") {\n                text = document.selection.createRange().text;\n            }\n            return text;\n        }\n\n        // only if no special key\n        if (c.length == 1) {\n            // check max length\n            if (value && maxLength && value.length >= maxLength && !getSelectedText()) {\n                return false; // prevent\n            }\n\n            // validate? only if ctrl or meta are not pressed\n            if (keyRegex && !event.ctrlKey && !event.metaKey && !keyRegex.test(String.fromCharCode(code))) {\n                return false; // key validation failed: prevent\n            }\n        }\n\n        this.onChanged();\n        return true; // allow\n    },\n\n    onKeyUp: function(event) {\n        if (!this.getAttribute(\"enabled\"))\n            return;\n\n        var code = event.keyCode;\n        var c = Sfera.Utils.getKeyFromCode(code);\n\n        if (c != \"enter\" && c !== \"tab\") {\n            this.onChanged();\n            return false; // nothing to see here: prevent\n        }\n\n        return true;\n    },\n\n    onChange: function() {\n        this.onChanged();\n    },\n\n    onEnterKey: function () {\n        if (!this.getAttribute(\"enabled\"))\n            return;\n\n        var f = this.getAttribute(\"onEnterKey\");\n        if (f) {\n            var value = this.getAttribute(\"value\");\n            return Sfera.Custom.exec(f,this.id,value);\n        } else {\n            return true; // don't block it\n        }\n    },\n\n    onFocus: function() {\n        var co = this.controller;\n        Sfera.client.setFocused(co);\n        co.focused = true;\n        co.updateClass();\n\n        var f = this.getAttribute(\"onFocus\");\n        if (f) {\n            var value = this.getAttribute(\"value\");\n            return Sfera.Custom.exec(f,this.id,value);\n        } else {\n            return true; // don't block it\n        }\n    },\n\n    onBlur: function() {\n        var co = this.controller;\n        co.onChanged();\n        Sfera.client.clearFocused(co);\n        co.focused = false;\n        co.updateClass();\n\n        var f = this.getAttribute(\"onBlur\");\n        if (f) {\n            var value = this.getAttribute(\"value\");\n            return Sfera.Custom.exec(f,this.id,value);\n        } else {\n            return true; // don't block it\n        }\n    },\n\n    onShow: function() {\n        if (this.getAttribute(\"focus\"))\n            this.focus();\n    },\n\n    onHide: function() {\n\n    }\n\n});\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\n/**\n * Image component.\n *\n * @class Sfera.Components.Image\n * @mixes Sfera.Behaviors.Visibility\n * @mixes Sfera.Behaviors.Position\n * @property {string} source - source url of the image\n */\nSfera.Components.create(\"Image\", {\n    presets: [\"Visibility\", \"Position\", \"Size\"],\n\n    attributes: {\n        source: {\n            type: \"string\",\n            update: function() {\n                var c = this.component;\n                var e = c.element;\n                // no source, hide it\n                if (!this.value) {\n                    e.innerHTML = \"\";\n                }\n                // svg\n                else if (this.value.indexOf(\".svg\") == this.value.length - 4) {\n                    var req = new Sfera.Net.Request();\n                    req.init();\n                    req.onLoaded = function() {\n                        var xml = req.getResponseXML();\n                        var svg = xml.getElementsByTagName(\"svg\")[0];\n                        e.innerHTML = \"\";\n                        if (svg) {\n                            e.appendChild(svg);\n                            svg.style.width = c.getAttribute(\"width\");\n                            svg.style.height = c.getAttribute(\"height\");\n                        }\n                        // done\n                        delete req;\n                    }\n                    req.open(this.value);\n                }\n                // normal img\n                else {\n                    e.innerHTML = \"<img src='\" + this.value + \"' width='100%' height='100%'>\";\n                }\n            }\n        }\n    },\n\n    init: function() {}\n\n});\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2015 SferaLabs\n * @license      {@link https://github.com/sfera-labs/sfera-webapp/license.txt|MIT License}\n * Page.js\n */\n\n/**\n * Page component.\n *\n * @class Sfera.Components.Page\n * @constructor\n */\n Sfera.Components.create(\"Page\",{\n     presets:[\"Visibility\"],\n\n     attributes: {\n         title: {\n             type:\"string\",\n         },\n\n         visible: {\n             default:\"false\"\n         }\n     },\n\n     init: function(){\n     }\n });\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\n/**\n * Label component.\n *\n * @class Sfera.Components.Label\n * @constructor\n */\nSfera.Components.create(\"Label\", {\n    presets: [\"Visibility\", \"Position\", \"Size\", \"Label\"],\n\n    attributes: {\n        // change label to text\n        label: null,\n\n        text: {\n            type: \"string\",\n            update: function() {\n                this.component.element.innerHTML = this.value;\n            }\n        }\n    }\n});\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\n/**\n * Interface component.\n *\n * @class Sfera.Components.Interface\n * @constructor\n */\n Sfera.Components.create(\"Interface\",{\n     presets:[\"Visibility\",\"Size\"],\n\n     attributes: {\n         title: {\n             type:\"string\",\n         },\n\n         skin: {\n            default:\"default\",\n            update: function () {\n                Sfera.client.skin = new Sfera.Skins[Sfera.Utils.capitalize(this.value)]();\n            }\n         },\n\n         zoom: {\n             type:\"float\",\n             update: function () {\n         \t\tif (this.value != 1) {\n         \t\t\tvar bodyE = document.getElementsByTagName(\"BODY\")[0];\n         \t\t\tvar v = \"scale(\"+this.value+\",\"+this.value+\")\";\n         \t\t\tif (Sfera.Device.browser == \"IE\") {\n         \t\t\t\tbodyE.style.msTransform = v;\n         \t\t\t\tbodyE.style.msTransformOrigin = \"0% 0%\";\n         \t\t\t} else {\n         \t\t\t\tbodyE.style.zoom = (this.value*100)+\"%\";\n         \t\t\t\tbodyE.style.OTransform = v;\n         \t\t\t\tbodyE.style.MozTransform = v;\n         \t\t\t\tbodyE.style.WebkitTransformOrigin = \"0 0\";\n         \t\t\t\tbodyE.style.transformOrigin = \"0% 0%\";\n         \t\t\t}\n         \t\t\t// prevent artifacts\n         \t\t\tbodyE.style.width = \"0px\";\n         \t\t\tbodyE.style.height = \"0px\";\n         \t\t}\n             }\n         },\n\n         autoReload: {\n             type: \"boolean\",\n             default: \"true\"\n         }\n     }\n });\n","/**\n * @author       Gionatan Iasio <gionatan@sferalabs.cc>\n * @copyright    2016 SferaLabs\n * @license      {@link http://sfera.sferalabs.cc/docs/sfera/license.html|LGPL License}\n */\n\nSfera.Custom = new (function(){\n\n    var root = this;\n\n    // bridge functions\n    this.onReady = (typeof(onReady) === 'function') ? function () {onReady();} : null;\n    this.onEvent = (typeof(onEvent) === 'function') ? function (id, value) {return onEvent(id, value);} : null;\n    this.onPage = (typeof(onPage) === 'function') ? function (name) {return onPage(id);} : null;\n\n    // context functions\n    function page(id) {\n        Sfera.client.showPage(id);\n    }\n\n    function event(id, value, callback) {\n        Sfera.client.sendEvent(id, value, callback);\n    }\n\n    function command(command, callback)  {\n        Sfera.client.sendCommand(command, callback);\n    }\n\n    function logout() {\n        Sfera.Login.logout();\n    }\n\n    function login(username, password) {\n        Sfera.Login.login(username, password);\n    }\n\n    function setAttribute(id, name, value) {\n        Sfera.client.setAttribute(id, name, value);\n    }\n\n    function getAttribute(id, name) {\n        Sfera.client.getAttribute(id, name);\n    }\n\n    // exec custom code. optional: id of the component calling, value to be sent\n    this.exec = function (f, id, value) {\n        // eval button js\n        try {\n            var result = eval(f);\n        } catch (e) {\n            if (e instanceof SyntaxError) {\n                alert(e.message);\n            } else {\n                throw (e);\n            }\n        }\n        return (result === false ? false : true); // return false (block event?) only if eval results in false\n    };\n\n})();\n"]}