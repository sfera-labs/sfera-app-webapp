/*! sfera-webapp - v0.0.2 */


Sfera.Components.create("Checkbox",{extends:"_Field",attributes:{width:{default:20,update:function(){this.component.elements.button&&(this.component.elements.button.style.width=this.value+"px")}},height:{default:20,update:function(){this.component.elements.button&&(this.component.elements.button.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},label:{type:"string",default:"",update:function(){var t=this.component;t.subComponents.label.setAttribute("label",this.value),this.value?t.elements.label.style.display="":t.elements.label.style.display="none"}},value:{type:"boolean",update:function(){this.component.redraw()}},changeDelay:{type:"integer",default:"0"},fontSize:{type:"integer",update:function(){this.component.subComponents.label.setAttribute("fontSize",this.value)}},fontColor:{update:function(){this.component.subComponents.label.setAttribute("fontColor",this.value)}},style:{update:function(){this.component.redraw()}},onChange:{type:"js",default:"event(id,value)"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.btObj=new Sfera.UI.Button(this.elements.button,{onclick:this.onClick.bind(this)})},focus:function(){this.onFocus()},blur:function(){this.onBlur()},redraw:function(){var t=this.getAttribute("style");this.elements.container.className="container "+(t?" style_"+t:"")+" "+(this.getAttribute("value")?"on":"off")},updateClass:function(){this.btObj.focus(this.focused),this.btObj.enable(this.getAttribute("enabled"))},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var t=this.getAttribute("onChange"),e=this.getAttribute("value");Sfera.Custom.exec(t,this.id,e)},flip:function(){this.setAttribute("value",!this.getAttribute("value")),this.onChange()},onClick:function(){this.focus(),this.flip()},onKeyDown:function(t){var e=t.keyCode;if("tab"==Sfera.Utils.getKeyFromCode(e))return this.changeTimeout&&this.onChangedTimeout(),Sfera.client.focusNext(t.shiftKey),!1},onKeyUp:function(t){var e=t.keyCode,n=Sfera.Utils.getKeyFromCode(e);return"space"!=n&&"enter"!=n||this.flip(),!0},onChange:function(){this.clearChangeTimeout();var t=this.getAttribute("changeDelay"),e=this;t?this.changeTimeout=setTimeout(function(){e.onChangedTimeout()},t):e.onChangedTimeout()},onFocus:function(){Sfera.client.setFocused(this),this.focused=!0,this.updateClass()},onBlur:function(){Sfera.client.clearFocused(this),this.focused=!1,this.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}});