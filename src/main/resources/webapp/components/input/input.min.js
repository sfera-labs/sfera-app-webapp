/*! sfera-webapp - v0.0.2 - 17-05-2016 */
Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){var a=this.getAttribute("cssClass");this.element.className="component comp_input"+(a?" "+a:"")+(this.focused?" focused":"");var b=this.getAttribute("style");this.elements.container.className="container"+(b?" style_"+b:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnterKey()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");if(1==d.length){if(f&&h&&f.length>=h&&!b())return!1;if(g&&!a.ctrlKey&&!a.metaKey&&!g.test(String.fromCharCode(c)))return!1}return this.onChanged(),!0},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnterKey:function(){var a=this.getAttribute("onEnterKey");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){var a=this.getAttribute("cssClass");this.element.className="component comp_input"+(a?" "+a:"")+(this.focused?" focused":"");var b=this.getAttribute("style");this.elements.container.className="container"+(b?" style_"+b:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnterKey()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");if(1==d.length){if(f&&h&&f.length>=h&&!b())return!1;if(g&&!a.ctrlKey&&!a.metaKey&&!g.test(String.fromCharCode(c)))return!1}return this.onChanged(),!0},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnterKey:function(){var a=this.getAttribute("onEnterKey");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnterKey()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnterKey:function(){var a=this.getAttribute("onEnterKey");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnterKey()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnterKey:function(){var a=this.getAttribute("onEnterKey");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnterKey()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnterKey:function(){var a=this.getAttribute("onEnterKey");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{
type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;
b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,
a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}}),Sfera.Components.create("Input",{"extends":"_Field",attributes:{type:{type:"string","default":"input",values:["input","textarea","color","date","datetime","email","number","password","tel","time","url"],update:function(){this.component.redraw()}},height:{update:function(){this.component.elements.field&&(this.component.elements.field.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},icon:{type:"string","default":"",update:function(){var a=this.component,b=a.subComponents.icon;b.setAttribute("source",this.value),this.value?a.elements.icon.style.display="":a.elements.icon.style.display="none"}},eraseButton:{type:"boolean","default":"false",update:function(){var a=this.component;a.elements.erase.style.display=this.value?"":"none"}},value:{update:function(){this.component.elements.field&&(this.component.elements.field.value=this.value)}},changeDelay:{type:"integer","default":"1000"},keyRegex:{type:"regexp"},valueRegex:{type:"regexp",compile:function(){this.value=Sfera.Compiler.compileAttributeValue(this,"^("+this.source+")$")}},fontSize:{type:"integer",update:function(){this.component.elements.field&&(this.component.elements.field.style.fontSize=this.value+"px")}},fontColor:{update:function(){this.component.elements.field&&(this.component.elements.field.style.color=this.value)}},maxLength:{type:"integer"},onKeyUp:{type:"js"},onChange:{type:"js","default":"event(id,value)"},onEnter:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.eraseButton=new Sfera.UI.Button(this.elements.erase,{onclick:this.onErase.bind(this)})},focus:function(){this.elements.field.focus()},blur:function(){this.elements.field.blur()},redraw:function(){var a="";this.elements.field&&(this.elements.field.onfocus=null,this.elements.field.onblur=null,this.elements.field.onselectstart=null,a=this.elements.field.value,this.elements.field=null);var b=this.getAttribute("type"),c=this.getAttribute("placeHolder");c=c?' placeholder="'+c+'"':"";var d="";d=d?' style="'+d+'"':"","textarea"==b?this.elements.fieldC.innerHTML='<textarea class="field" '+d+c+" /></textarea>":this.elements.fieldC.innerHTML='<input class="field" type="'+b+'"'+d+c+" />",this.elements.field=this.elements.fieldC.childNodes[0],this.elements.field.value=a,this.attributes.height.update(),"Android"==Sfera.Device.android?(this.elements.field.onfocus=function(){return!1},this.elements.field.oninput=this.onUserChange):this.elements.field.onfocus=this.onFocus,this.elements.field.onblur=this.onBlur,this.elements.field.onselectstart=this.onSelectStart,this.elements.field.controller=this},updateClass:function(){this.element.className="component comp_input"+(this.focused?" focused":"");var a=this.getAttribute("style");this.elements.container.className="container"+(a?" style_"+a:"")},onErase:function(){this.setAttribute("value",""),this.onChangedTimeout()},onChanged:function(){var a=this.elements.field.value;if(a!=this.attributes.value.source){this.attributes.value.source=this.attributes.value.value=a,this.clearChangeTimeout();var b=this.getAttribute("changeDelay"),c=this;b&&(this.changeTimeout=setTimeout(function(){c.onChangedTimeout()},b))}},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var a=this.getAttribute("onChange"),b=this.getAttribute("value");Sfera.Custom.exec(a,this.id,b)},onSelectStart:function(a){},onKeyDown:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b),d=this.getAttribute("type");return"enter"!=c||this.onEnter()||(c=""),"enter"==c&&"textarea"!=d||"tab"==c?(this.onChangedTimeout(),Sfera.client.focusNext(a.shiftKey),"enter"==c&&"textarea"!=d&&this.blur(),!1):(this.onChanged(),!0)},onKeyPress:function(a){function b(){var a="";return e.selectionStart!=e.selectionEnd?a=f.substr(e.selectionStart,e.selectionEnd):"undefined"!=typeof window.getSelection?a=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().text),a}var c=a.keyCode,d=Sfera.Utils.getKeyFromCode(c),e=this.elements.field,f=this.getAttribute("value"),g=this.getAttribute("keyRegex"),h=this.getAttribute("maxLength");return!d&&f&&h&&f.length>=h&&!b()?!1:d||!g||a.ctrlKey||a.metaKey||g.test(String.fromCharCode(c))?(this.onChanged(),!0):!1},onKeyUp:function(a){var b=a.keyCode,c=Sfera.Utils.getKeyFromCode(b);return"enter"!=c&&"tab"!==c?(this.onChanged(),!1):!0},onChange:function(){this.onChanged()},onEnter:function(){var a=this.getAttribute("onEnter");return a?Sfera.Custom.exec(a):!0},onFocus:function(){var a=this.controller;Sfera.client.setFocused(a),a.focused=!0,a.updateClass()},onBlur:function(){var a=this.controller;a.onChanged(),Sfera.client.clearFocused(a),a.focused=!1,a.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}});