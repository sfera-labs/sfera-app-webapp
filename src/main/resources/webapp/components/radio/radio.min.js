/*! sfera-webapp - v0.0.2 */


Sfera.Components.create("Radio",{extends:"Checkbox",attributes:{group:{type:"string",update:function(){var t=this.component;t.group&&Sfera.client.components.removeByGroup(t,t.group),t.group=this.value,t.group&&Sfera.client.components.addByGroup(t,t.group)}}},init:function(){this.super("Checkbox","init")},onChange:function(){var t=this.getAttribute("onChange"),e=!0;if(t){var n=this.getAttribute("value");e=Sfera.Custom.exec(t,this.id,n)}if(!1!==e){var i=this.getAttribute("group");if(i&&this.getAttribute("value"))for(var o=Sfera.client.components.getByGroup(i),s=0;s<o.length;s++)o[s]!=this&&o[s].setAttribute("value",!1);this.super("Checkbox","onChange")}}}),Sfera.Components.create("Checkbox",{extends:"_Field",attributes:{width:{default:20,update:function(){this.component.elements.button&&(this.component.elements.button.style.width=this.value+"px")}},height:{default:20,update:function(){this.component.elements.button&&(this.component.elements.button.style.height=this.value+"px")}},focus:{type:"boolean",update:function(){this.value&&this.component.focus()}},label:{type:"string",default:"",update:function(){var t=this.component;t.subComponents.label.setAttribute("label",this.value),this.value?t.elements.label.style.display="":t.elements.label.style.display="none"}},value:{type:"boolean",update:function(){this.component.redraw()}},changeDelay:{type:"integer",default:"0"},fontSize:{type:"integer",update:function(){this.component.subComponents.label.setAttribute("fontSize",this.value)}},fontColor:{update:function(){this.component.subComponents.label.setAttribute("fontColor",this.value)}},style:{update:function(){this.component.redraw()}},onKeyUp:{type:"js"},onChange:{type:"js",default:"event(id,value)"},onEnterKey:{type:"js"},onFocus:{type:"js"},onBlur:{type:"js"}},init:function(){this.value="",this.changeTimeout=null,this.elements=Sfera.Utils.getComponentElements(this.element,!0,this.elements),this.btObj=new Sfera.UI.Button(this.element,{onclick:this.onClick.bind(this)})},focus:function(){this.onFocus()},blur:function(){this.onBlur()},redraw:function(){var t=this.getAttribute("style");this.elements.container.className="container "+(t?" style_"+t:"")+" "+(this.getAttribute("value")?"on":"off")},updateClass:function(){this.btObj.focus(this.focused),this.btObj.enable(this.getAttribute("enabled"))},clearChangeTimeout:function(){this.changeTimeout&&(clearTimeout(this.changeTimeout),this.changeTimeout=null)},onChangedTimeout:function(){this.clearChangeTimeout();var t=this.getAttribute("onChange"),e=this.getAttribute("value");Sfera.Custom.exec(t,this.id,e)},flip:function(){this.setAttribute("value",!this.getAttribute("value")),this.onChange()},onClick:function(){var t=this.getAttribute("onClick"),e=!0;if(t){var n=this.getAttribute("value");e=Sfera.Custom.exec(t,this.id,n)}!1!==e&&(this.focus(),this.flip())},onKeyDown:function(t){var e=t.keyCode,n=Sfera.Utils.getKeyFromCode(e);return"enter"!=n||this.onEnter()||(n=""),"tab"==n?(this.onChangedTimeout(),Sfera.client.focusNext(t.shiftKey),"enter"==n&&this.blur(),!1):("space"!=n&&"enter"!=n||this.flip(),this.onChange(),!0)},onKeyPress:function(t){var e=t.keyCode;Sfera.Utils.getKeyFromCode(e);return this.onChange(),!0},onKeyUp:function(t){var e=t.keyCode,n=Sfera.Utils.getKeyFromCode(e);return"enter"==n||"tab"==n||(this.onChange(),!1)},onChange:function(){this.clearChangeTimeout();var t=this.getAttribute("changeDelay"),e=this;t?this.changeTimeout=setTimeout(function(){e.onChangedTimeout()},t):e.onChangedTimeout()},onEnterKey:function(){var t=this.getAttribute("onEnterKey");return!t||Sfera.Custom.exec(t)},onFocus:function(){Sfera.client.setFocused(this),this.focused=!0,this.updateClass()},onBlur:function(){this.onChange(),Sfera.client.clearFocused(this),this.focused=!1,this.updateClass()},onShow:function(){this.getAttribute("focus")&&this.focus()},onHide:function(){}});